{"version":3,"sources":["../../src/controllers/connection.controller.js"],"names":["mongoose","require","Gig","model","User","Connections","module","exports","add","body","connection","save","err","console","log","addFromRoute","req","res","json","getAll","find","populate","exec","result","remove","_id","params","id","getByUser","$or","requester","provider","getByConnection","findOne"],"mappings":"AAAA;;AAEA,IAAIA,WAAWC,QAAQ,UAAR,CAAf;;AAEAA,QAAQ,qBAAR;AACAA,QAAQ,sBAAR;AACAA,QAAQ,4BAAR;;AAGA,IAAIC,MAAMF,SAASG,KAAT,CAAe,KAAf,CAAV;AACA,IAAIC,OAAOJ,SAASG,KAAT,CAAe,MAAf,CAAX;;AAEA,IAAIE,cAAcL,SAASG,KAAT,CAAe,YAAf,CAAlB;;AAEAG,OAAOC,OAAP,GAAiB;AACfC,OAAK,aAASC,IAAT,EAAe;AAClB,QAAIC,aAAa,IAAIL,WAAJ,CAAgBI,IAAhB,CAAjB;AACAC,eAAWC,IAAX,CAAgB,UAASC,GAAT,EAAcF,UAAd,EAA0B;AACxC,UAAIE,GAAJ,EAAS;AACPC,gBAAQC,GAAR,CAAY,CAAZ,EAAeF,GAAf;AACA,eAAOA,GAAP;AACD;AACDC,cAAQC,GAAR,CAAY,OAAZ;;AAEA,aAAOJ,UAAP;AACD,KARD;AASD,GAZc;AAafK,gBAAc,sBAASC,GAAT,EAAcC,GAAd,EAAmB;AAC/B,QAAIP,aAAa,IAAIL,WAAJ,CAAgBW,IAAIP,IAApB,CAAjB;AACAC,eAAWC,IAAX,CAAgB,UAASC,GAAT,EAAcF,UAAd,EAA0B;AACxC,UAAIE,GAAJ,EAAS;AACP,eAAOA,GAAP;AACD;AACDK,UAAIC,IAAJ,CAASR,UAAT;AACD,KALD;AAMD,GArBc;AAsBfS,UAAQ,gBAASH,GAAT,EAAcC,GAAd,EAAmB;AACzBZ,gBAAYe,IAAZ,CAAiB,EAAjB,EACGC,QADH,CACY,wBADZ,EAEGC,IAFH,CAEQ,UAASV,GAAT,EAAcW,MAAd,EAAsB;AAC1B,UAAIX,GAAJ,EAAS;AACP,eAAOK,IAAIC,IAAJ,CAASN,GAAT,CAAP;AACD;AACDK,UAAIC,IAAJ,CAASK,MAAT;AACD,KAPH;AAQD,GA/Bc;AAgCfC,UAAQ,gBAASR,GAAT,EAAcC,GAAd,EAAmB;AACzBZ,gBAAYmB,MAAZ,CAAmB;AACjBC,WAAKT,IAAIU,MAAJ,CAAWC;AADC,KAAnB,EAEG,UAASf,GAAT,EAAcW,MAAd,EAAsB;AACvB,UAAIX,GAAJ,EAAS;AACP,eAAOK,IAAIC,IAAJ,CAASN,GAAT,CAAP;AACD;AACDK,UAAIC,IAAJ,CAASK,MAAT;AACD,KAPD;AAQD,GAzCc;AA0CfK,aAAW,mBAASZ,GAAT,EAAcC,GAAd,EAAmB;AAC5BZ,gBAAYe,IAAZ,CAAiB,EAACS,KAAK,CAAC,EAACC,WAAWd,IAAIU,MAAJ,CAAWC,EAAvB,EAAD,EAA6B,EAACI,UAAUf,IAAIU,MAAJ,CAAWC,EAAtB,EAA7B,CAAN,EAAjB,EACGN,QADH,CACY,wBADZ,EAEGC,IAFH,CAEQ,UAASV,GAAT,EAAcW,MAAd,EAAsB;AAC1B,UAAIX,GAAJ,EAAS;AACP,eAAOK,IAAIC,IAAJ,CAASN,GAAT,CAAP;AACD;AACDK,UAAIC,IAAJ,CAASK,MAAT;AACD,KAPH;AAQD,GAnDc;AAoDfS,mBAAiB,yBAAShB,GAAT,EAAcC,GAAd,EAAmB;AAClCZ,gBAAY4B,OAAZ,CAAoB;AAChBR,WAAKT,IAAIU,MAAJ,CAAWC;AADA,KAApB,EAGGN,QAHH,CAGY,wBAHZ,EAIGC,IAJH,CAIQ,UAASV,GAAT,EAAcW,MAAd,EAAsB;AAC1B,UAAIX,GAAJ,EAAS;AACP,eAAOK,IAAIC,IAAJ,CAASN,GAAT,CAAP;AACD;AACDK,UAAIC,IAAJ,CAASK,MAAT;AACD,KATH;AAUD;AA/Dc,CAAjB","file":"connection.controller.js","sourcesContent":["'use strict';\n\nvar mongoose = require('mongoose');\n\nrequire(\"../models/gig.model\");\nrequire(\"../models/user.model\");\nrequire(\"../models/connection.model\");\n\n\nvar Gig = mongoose.model(\"Gig\");\nvar User = mongoose.model(\"User\");\n\nvar Connections = mongoose.model(\"Connection\");\n\nmodule.exports = {\n  add: function(body) {\n    var connection = new Connections(body);\n    connection.save(function(err, connection) {\n      if (err) {\n        console.log(5, err)\n        return err;\n      }\n      console.log(\"saved\");\n\n      return connection;\n    });\n  },\n  addFromRoute: function(req, res) {\n    var connection = new Connections(req.body);\n    connection.save(function(err, connection) {\n      if (err) {\n        return err;\n      }\n      res.json(connection);\n    });\n  },\n  getAll: function(req, res) {\n    Connections.find({})\n      .populate(\"requester provider gig\")\n      .exec(function(err, result) {\n        if (err) {\n          return res.json(err);\n        }\n        res.json(result);\n      })\n  },\n  remove: function(req, res) {\n    Connections.remove({\n      _id: req.params.id\n    }, function(err, result) {\n      if (err) {\n        return res.json(err);\n      }\n      res.json(result);\n    })\n  },\n  getByUser: function(req, res) {\n    Connections.find({$or: [{requester: req.params.id}, {provider: req.params.id}]})\n      .populate(\"requester provider gig\")\n      .exec(function(err, result) {\n        if (err) {\n          return res.json(err);\n        }\n        res.json(result);\n      })\n  },\n  getByConnection: function(req, res) {\n    Connections.findOne({\n        _id: req.params.id\n      })\n      .populate(\"requester provider gig\")\n      .exec(function(err, result) {\n        if (err) {\n          return res.json(err);\n        }\n        res.json(result);\n      })\n  }\n};\n"]}